<!DOCTYPE html>

<html>

    <head>

        <style>
            p.inline {display: inline-block;}
            span { font-size: 13px; font-weight: bold; }
        </style>
        <style type="text/css" media="print">
                @page
                {
                    size: auto;   /* auto is the initial value */
                    margin: 0px;  /* this affects the margin in the printer settings */
                    border: none ;
                    padding: 0px;
            
                }
            
                /* body {
              background-image: url('images/pharmacie.png');
              background-repeat: no-repeat;
            } */
            
        </style>
        <link rel="stylesheet" href="css/bootstrap.css">
        <script src="js/jquery-3.1.1.min.js"></script>
         <script type="text/javascript" src="js/script.js"></script>
    </head>
    <body onload="window.print();">
      <div style="margin-right: 4%;">
        <table class="table" id="table-ticket">  
            <tr align="center">
                <th colspan="4"><p align="center"><span style="font-size:16px;" id="nomB"></span></p></th>
            </tr> 
            <tr align="center">
              <td colspan="4" style="border-bottom: 1px solid black;border-top: 1px solid black;"><span id="addresseB"></span></td>
            </tr>
            <tr>
              <td colspan="4" style="border-bottom: 1px solid black;border-top: 1px solid black;">
                <div  id ="idPagnet"></div><br> 
                <div  id ="date"></div><br> 
                <div  id ="heure"></div>
              </td>
            </tr>
   
            <!-- <tr align="center">
              <td colspan="4" style="border-bottom: 1px solid black;border-top: 1px solid black;">
                <strong>
                  <span> DEPOT : DEPOT</span><br>
                  <span>ADRESSE : ADRESSE </span><br> 
                  <span>TELEPHONE : PORTABLE </span>
                </strong>
              </td>
            </tr> -->
        
            <tr  style="border-bottom: 1px solid black;border-top: 1px solid black;">
              <th colspan="2">REFERENCE</th>
              <th style="border: 1px solid black;">QTE</th>
              <th>PRIX</th>
            </tr>
            <tbody id="tbody">

            </tbody>
            <tr>
              <td colspan="4">
                <div id ="total"></div><br>
                    
                <div id="remise"></div>
                    
                <div id="netapayer"></div><br>
                    
                <div id="espece"></div>
                    
                <div id="rendu"></div>

                <div id="compte"></div><br>

                <div id="avance"></div>
                    
                <div id="reste"></div>
                    
                <div id="compte2"></div>
                                 
              </td>
            </tr>
        </table>
        **************************************************
        <p align="center"><strong><span class="align-middle"  style="font-size:12px; font-family: Lucida, Lucida Calligraphy, Georgia, serif;"> MERCI DE VOTRE VISITE </span></strong></p>
        **************************************************
        <center><img src='images/6400980207a4f.png'></center>
        <script type="text/javascript">
          setTimeout("self.close()", 3000 ) // after 3 seconds
        </script>
        
      </div>
    </body>

    <script>
      lesPaniers=getPagnet();
      lignes=getLigne();
      boutiques=getBoutique();
      
      idPanier=localStorage.getItem('idPanierT')
      //document.getElementById('idPanier').innerHTML=idPanie
      if(lesPaniers != null){
        //for(var i=0; i< lesPaniers.length;i++){
          searchPanier=lesPaniers.find(p =>p.idPagnet==idPanier); 
          //alert(sessionStorage.nomBSession)

          lesComptes=getCompte();
          searchCompte=lesComptes.find(c =>c.idCompte==searchPanier.idCompte);
          
          // idB=localStorage.getItem('idBoutique')
          // searchBoutique=boutiques.find(b =>b.idBoutique==idB);
          nomB=sessionStorage.nomBSession
          adresse=sessionStorage.adresseBSession
          telephone=sessionStorage.telBoutiqueSession
          
          document.getElementById('nomB').innerHTML=nomB
          
          document.getElementById('addresseB').innerHTML='ADRESSE : '+adresse+'\nTELEPHONE :' +telephone

          document.getElementById('idPagnet').innerHTML='<span style="float: left"> PANIER </span> <span style="float: right">'+(searchPanier.idPagnet+1)+'</span>'
          document.getElementById('date').innerHTML='<span style="float: left"> DATE </span> <span style="float: right">'+searchPanier.datepagej+'</span>'
          document.getElementById('heure').innerHTML='<span style="float: left"> HEURE </span> <span style="float: right">'+searchPanier.heurePagnet+'</span>'
          document.getElementById('total').innerHTML='<span style="float: left"> TOTAL </span> <span style="float: right">'+searchPanier.totalp+'</span>'
          document.getElementById('netapayer').innerHTML='<span style="float: left"> NET A PAYER </span> <span style="float: right">'+searchPanier.apayerPagnet+'</span>'
          
          document.getElementById('compte').innerHTML='<span style="float: left"> COMPTE </span> <span style="float: right">'+searchCompte.nomCompte+'</span>'
          
          
          if(searchPanier.remise==0){
            // divRemise='<div></div>';
            // document.getElementById('remise').innerHTML=divRemise
            //$('#remise').hide
              
          
          }
          else{
              document.getElementById('remise').innerHTML='<span style="float: left"> REMISE </span> <span style="float: right">'+searchPanier.remise+'</span>'
          }
          if(searchPanier.versement==0){
              divEspece='<div style="display:none;"></div>';
              divRendu='<div style="display:none;"></div>';
              document.getElementById('espece').innerHTML=divEspece
              document.getElementById('rendu').innerHTML=divRendu
              // $('#espece').d
              // $('#rendu').hide
          }
          else{

              document.getElementById('espece').innerHTML='<span style="float: left"> ESPECE </span> <span style="float: right">'+searchPanier.versement+'</span>'
              document.getElementById('rendu').innerHTML='<span style="float: left"> RENDU </span> <span style="float: right">'+searchPanier.restourne+'</span>'
          }
          if(searchPanier.avance==0 || searchPanier.avance==""){
              divAvance='<div style="display:none;"></div>';
              divReste='<div style="display:none;"></div>';
              document.getElementById('avance').innerHTML=divAvance
              document.getElementById('reste').innerHTML=divReste

              // $('#avance').hide
              // $('#reste').hide
              // $('#compte2').hide
              // document.getElementById('avance').innerHTML='Avance : '+searchPanier.avance
              // document.getElementById('reste').innerHTML='Reste : '+parseInt(searchPanier.apayerPagnet-searchPanier.avance)
              // var idCompte2=localStorage.getItem('idCompte2')
              // var searchCompte=lesComptes.find(c =>c.idCompte==idCompte2);
              
              // document.getElementById('compte2').innerHTML='Compte avance : '+searchCompte.nomCompte
          }
          else{
              
              document.getElementById('avance').innerHTML='<span style="float: left"> AVANCE </span> <span style="float: right">'+searchPanier.avance+'</span>'
              document.getElementById('reste').innerHTML='<span style="float: left"> RESTE </span> <span style="float: right">'+parseInt(searchPanier.apayerPagnet-searchPanier.avance)+'</span>'
              var idCompte2=localStorage.getItem('idCompte2')
              var searchCompte=lesComptes.find(c =>c.idCompte==idCompte2);             
              document.getElementById('compte2').innerHTML='<span style="float: left"> COMPTE AVANCE </span> <span style="float: right">'+searchCompte.nomCompte+'</span>'            
          }
          
          if(lignes!=null){
            //var l=''
              for(var j=lignes.length-1; 0<=j;j--){
                  if(searchPanier.idPagnet==lignes[j].idPagnet){
                      var l='<tr>' +
    
                              '<td colspan="2" style="border-bottom: 1px solid black;border-top: 1px solid black;"><span>'+ lignes[j].designation +'</span></td>'+

                              '<td style="border: 1px solid black;"><span>'+lignes[j].quantite+'</span></td>'+

                              '<td style="border-bottom: 1px solid black;border-top: 1px solid black;"><span>'+lignes[j].prixunitevente +'</span></td>'
        
                            '</tr>';
    
                    $("#tbody").prepend(l)
                  }
              }
            }
        //}
      }

  </script>
   
    

    
</html>