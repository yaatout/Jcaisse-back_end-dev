<html>
  <head>
    <link rel="stylesheet" href="../css/bootstrap.css">
    <!-- <link rel="stylesheet" href="css/datatables.css"> -->
    <link rel="stylesheet" href="css/datatables.min.css">
   
    
    <!-- <link rel="stylesheet" href= "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- <link rel="stylesheet" href= "https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap.min.css"> -->

    <!-- <link rel="stylesheet" href= "https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap.min.css"> -->
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <!-- <style>
      table {  
      border-collapse: collapse;  
      width: 100%;  
      }  
        
      th, td {  
      border: 1px solid #ddd;  
      padding: 8px;  
      text-align: left;  
      }  
        
      th {  
      background-color: #4CAF50;  
      color: white;  
      } 
    </style> -->


    <script src="js/jquery-3.1.1.min.js"></script>
    <script src="js/datatables.min.js""></script>
    <script src="js/bootstrap.js"></script>
    <!-- <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap.min.js"></script>
    <script src="js/bootstrap.js"></script> -->
     
  </head>
  <body>
    <div class="entete"> </div>

    <div class="container">
        <center>
          <button type="button" class="btn btn-success btn-lg" data-toggle="modal" data-target="#ajoutClient" data-dismiss="modal" >
              <i class="glyphicon glyphicon-plus"></i>Ajout Client
          </button>
        </center> 

        <div id="ajoutClient" class="modal fade" role="dialog">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Ajouter Client</h4>
                </div>
                <div class="modal-body" style="padding:40px 50px;">
                <div class="row">
                  <form class="form" >
                    <div class="form-group ">
                      <label for="ajtPrenomCL">Prenom </label>
                      <input type="text" class="inputbasic form-control" id="ajtPrenomCL" autofocus/>
                    </div>
                    <div class="form-group ">
                      <label for="ajtNomCL">Nom </label>
                      <input type="text" class="inputbasic form-control" id="ajtNomCL"  />
                    </div>
                    <div class="form-group">
                      <label for="ajtAdresseCL">Adresse </label>
                      <input type="text" class="inputbasic form-control" id="ajtAdresseCL" />
                    </div>
                    <div class="form-group ">
                      <label for="ajtTelephoneCL">Telephone </label>
                      <input type="text" class="inputbasic form-control" id="ajtTelephoneCL" />
                    </div>
                                    <div class="form-group " id="personnelDiv">
                      <label for="personnel">Fait partie du personnel </label>
                      <select name="personnel" id="personnel" class="inputbasic form-control" style="width:20%">
                        <option value="0">Non</option>
                        <option value="1">Oui</option>
                      </select>
                    </div>
                    </div>
                    <div class="modal-footer row">
                      <div class="col-sm-3 "> <input type="button" id="btn_ajt_Client" class="btn_CodeDesign_P boutonbasic"  value=" Enregistrer >>" /></div>
                      <div class="col-sm-3 "> <input type="button" class="boutonbasic" data-dismiss="modal" name="annule" value="<<  ANNULER" /></div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
        </div>
        <br>
      <ul class="nav nav-tabs">
        <li class="active">
            <a data-toggle="tab" href="#tab_Clients">LISTE DES CLIENTS</a>
        </li>
        <li class="tab_Depots">
            <a data-toggle="tab" href="#tab_Depots">LISTE DES DEPOTS</a>
        </li>
        <li class="tab_Dettes">
            <a data-toggle="tab" href="#tab_Dettes">LISTE DES DETTES</a>
        </li>
        <li class="tab_Personnels">
            <a data-toggle="tab" href="#tab_Personnels">LISTE DES PERSONNELS</a>
        </li>
        <li class="">
            <a data-toggle="tab" href="#LISTECLIENTS5">LISTE DES ARCHIVES</a>
        </li>    
          </ul>
      <div class="tab-content">
        <div id="tab_Clients" class="tab-pane fade in active">
          <br />
          <!-- <div class="container row">
            <a class="col-lg-6 alert alert-info" href="#">LISTE DES CLIENTS 
                            </a>
          </div> -->
          <div class="table-responsive">
            <!-- <div class = "food-table"> -->
                <table id = "food" class="table table-striped table-bordered nowrap" style="width:100%">
                  <thead>
                    <tr>
                        <th> Prenom </th>
                        <th> Nom </th>
                        <th> Adresse </th>
                        <th> Telephone </th>
                        <th> plafond </th>
                        <th> Solde </th>
                    </tr>
                  </thead>
                  <tbody>
                  </tbody>
              </table>
            <!-- </div> -->
            <div id="paginationContainer"></div>
  

            <div id="modifierClient" class="modal fade" role="dialog">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                      <h4 class="modal-title">Modification Client</h4>
                    </div>
                    <div class="modal-body" style="padding:40px 50px;">
                    <div class="row">
                      <form class="form" >
                        <div class="form-group hidden">
                          <input type="hidden"  id="idCL_Mdf"  />
                          <input type="hidden"  id="ordreCL_Mdf"  />
                        </div>
                        <div class="form-group ">
                          <label for="prenomCL_Mdf">Prenom </label>
                          <input type="text" class="inputbasic form-control" id="prenomCL_Mdf"  />
                        </div>
                        <div class="form-group ">
                          <label for="nomCL_Mdf">Nom </label>
                          <input type="text" class="inputbasic form-control" id="nomCL_Mdf"  />
                        </div>
                        <div class="form-group ">
                          <label for="adresseCL_Mdf">Adresse </label>
                          <input type="text" class="inputbasic form-control" id="adresseCL_Mdf" />
                        </div>
                        <div class="form-group ">
                          <label for="telephoneCL_Mdf">Telephone </label>
                          <input type="text" class="inputbasic form-control" id="telephoneCL_Mdf" />
                        </div>
                                            <div class="form-group " id="personnelDiv_Mdf">
                          <label for="personnel_Mdf">Fait partie du personnel </label>
                          <select name="personnel_Mdf" id="personnel_Mdf" class="inputbasic form-control" style="width:20%">
                            <option value="0">Non</option>
                            <option value="1">Oui</option>
                          </select>
                        </div>
                        </div>
                        <div class="modal-footer">
                          <div class="col-sm-3 "> <input type="button" id="btn_mdf_Client" class="btn_CodeDesign_P boutonbasic"  value=" Enregistrer >>" /></div>
                          <div class="col-sm-3 "> <input type="button" class="boutonbasic" data-dismiss="modal" name="annule" value="<<  ANNULER" /></div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
            </div>

            <div id="supprimerClient" class="modal fade" role="dialog">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                      <h4 class="modal-title">Suppression Client</h4>
                    </div>
                    <div class="modal-body" style="padding:40px 50px;">
                      <form class="form"  >
                        <div class="form-group">
                          <input type="hidden"  id="idCL_Spm"  />
                          <input type="hidden"  id="ordreCL_Spm"  />
                        </div>
                        <div class="form-group">
                          <label for="prenomCL_Mdf">Prenom </label>
                          <input type="text" disabled="true" class="inputbasic form-control" id="prenomCL_Spm"  />
                        </div>
                        <div class="form-group">
                          <label for="nomCL_Mdf">Nom </label>
                          <input type="text" disabled="true" class="inputbasic form-control" id="nomCL_Spm"  />
                        </div>
                        <div class="form-group">
                          <label for="adresseCL_Mdf">Adresse </label>
                          <input type="text" disabled="true" class="inputbasic form-control" id="adresseCL_Spm" />
                        </div>
                        <div class="form-group">
                          <label for="telephoneCL_Mdf">Telephone </label>
                          <input type="text" disabled="true" class="inputbasic form-control" id="telephoneCL_Spm" />
                        </div>
                        <div class="modal-footer row">
                          <div class="col-sm-3 "> <input type="button" id="btn_spm_Client" class="btn_CodeDesign_P boutonbasic"  value=" Enregistrer >>" /></div>
                          <div class="col-sm-3 "> <input type="button" class="boutonbasic" data-dismiss="modal" name="annule" value="<<  ANNULER" /></div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
            </div>
          </div>
        </div>
        <div id="tab_Depots" class="tab-pane fade">
          <br />
          <div class="container row">
            <a class="col-lg-6 alert alert-info" href="#">LISTE DES DEPOTS 
                            </a>
          </div>
          <div class="table-responsive">
              <label class="pull-left" for="slct_Nbre_ListerDepots">Nombre entrées </label>
              <select class="pull-left" id="slct_Nbre_ListerDepots">
                <optgroup>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option> 
                </optgroup>       
              </select>
              <input class="pull-right" type="text" name="" id="inpt_Search_ListerDepots" placeholder="Rechercher..." autocomplete="off">
              <div id="listerDepots"><!-- content will be loaded here --></div>
          </div>
        </div>
        <div id="tab_Dettes" class="tab-pane fade">
          <br />
          <div class="container row">
            <a class="col-lg-6 alert alert-info" href="#">LISTE DES DETTES 
                            </a>
          </div>
          <div class="table-responsive">
              <label class="pull-left" for="slct_Nbre_ListerDettes">Nombre entrées </label>
              <select class="pull-left" id="slct_Nbre_ListerDettes">
                <optgroup>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option> 
                </optgroup>       
              </select>
              <input class="pull-right" type="text" name="" id="inpt_Search_ListerDettes" placeholder="Rechercher..." autocomplete="off">
              <div id="listerDettes"><!-- content will be loaded here --></div>
          </div>
        </div>
        <div id="tab_Personnels" class="tab-pane fade">
          <br />
          <div class="container row">
            <a class="col-lg-6 alert alert-info" href="#">LISTE DES PERSONNELS 
                            </a>
          </div>
          <div class="table-responsive">
              <label class="pull-left" for="slct_Nbre_ListerPersonnels">Nombre entrées </label>
              <select class="pull-left" id="slct_Nbre_ListerPersonnels">
                <optgroup>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option> 
                </optgroup>       
              </select>
              <input class="pull-right" type="text" name="" id="inpt_Search_ListerPersonnels" placeholder="Rechercher..." autocomplete="off">
              <div id="listerPersonnels"><!-- content will be loaded here --></div>
          </div>
        </div>
        <div id="LISTECLIENTS5" class="tab-pane fade">
          <br />
          <div class="container row">
            <a class="col-lg-6 alert alert-info" href="#">LISTE DES ARCHIVES 
                            </a>
          </div>
          <div class="table-responsive">
              <label class="pull-left" for="nbEntreeArch">Nombre entrées </label>
              <select class="pull-left" id="nbEntreeArch">
                <optgroup>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option> 
                </optgroup>       
              </select>
              <input class="pull-right" type="text" name="" id="searchInputArch" placeholder="Rechercher..." autocomplete="off">
              <div id="listeClientArchives"><!-- content will be loaded here --></div>
          </div>
        </div>    
          </div>
    </div>

    <!-- <script type="text/javascript" src="js/bon.js"></script> -->
    <script type="text/javascript">
      $(".entete").load("headerOffline.html");

        foods = JSON.parse(localStorage.getItem("Client") )
        //alert(foods)
       //accessing the table and adding data
      const table = document.querySelector('#food tbody')
      foods.forEach(food => {
        const row = document.createElement('tr')
        if(food.solde>=0){
          row.innerHTML = `
          <td>${food.prenom}</td>
          <td>${food.nom}</td>
          <td>${food.adresse}</td> 
          <td>${food.telephone}</td>
          <td>${food.plafond}</td>
          <td><span class='alert-danger'>${food.solde} <a href='bonPclient.html' onclick='getIdClient(${food.idClient})'> Details</a></span></td>
        `
          table.appendChild(row)

        }else{
          row.innerHTML = `
          <td>${food.prenom}</td>
          <td>${food.nom}</td>
          <td>${food.adresse}</td> 
          <td>${food.telephone}</td>
          <td>${food.plafond}</td>
          <td><span class='alert-success'>${food.solde} <a href='bonPclient.html' onclick='getIdClient(${food.idClient})'> Details</a></span></td>
        `
          table.appendChild(row)

        }
      
      })
      $(document).ready(function () {
          var table = $('#food').DataTable();
      });

      function getIdClient(id){
        date=new Date();
        dateFin=date.toLocaleDateString("es-CL");
        boutiques=JSON.parse(localStorage.getItem("Boutique"));
        clients=JSON.parse(localStorage.getItem("Client"));
        searchBoutique=boutiques.find(b=>b.offline == 1);
        datecreation=searchBoutique.datecreation;
        debut=datecreation.split('-');
        dateDebut=debut[2]+'-'+debut[1]+'-'+debut[0];
        localStorage.setItem('Periode', dateDebut+' au '+dateFin);
        localStorage.setItem('idClient', id);
        searchClient=clients.find(c=>c.idClient == id);
        localStorage.setItem('SoldeClient', searchClient.solde);

        return id;
        
      }

    </script>

  </body>

</html>
 

