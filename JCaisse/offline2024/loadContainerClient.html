        <!-- Debut Javascript de l'Accordion pour Tout les Paniers -->

        <script >

            $(function() {

            $(".expand").on( "click", function() {

                // $(this).next().slideToggle(200);

                $expand = $(this).find(">:first-child");



                if($expand.text() == "+") {

                $expand.text("-");

                } else {

                $expand.text("+");

                }

            });

            });

            var blink_speed = 500; 

            var t = setInterval(function () {

                    var ele = document.getElementById('blinker'); 

                    ele.style.visibility = (ele.style.visibility == 'hidden' ? '' : 'hidden'); 

                }, blink_speed);



            function modifierVersement(idVersement) {

                $("#ancienV"+idVersement).hide();

                $("#nouveauV"+idVersement).show();

            }
            function showPreviewVersement(event,idVersement) {
                var file = document.getElementById('input_file_Versement'+idVersement).value;
                var reader = new FileReader();
                reader.onload = function()
                {
                    var format = file.substr(file.length - 3);
                    var pdf = document.getElementById('output_pdf_Versement'+idVersement);
                    var image = document.getElementById('output_image_Versement'+idVersement);
                    if(format=='pdf'){
                        document.getElementById('output_pdf_Versement'+idVersement).style.display = "block";
                        document.getElementById('output_image_Versement'+idVersement).style.display = "none";
                        pdf.src = reader.result;
                    }
                    else{
                        document.getElementById('output_image_Versement'+idVersement).style.display = "block";
                        document.getElementById('output_pdf_Versement'+idVersement).style.display = "none";
                        image.src = reader.result;
                    }
                }
                reader.readAsDataURL(event.target.files[0]);
                document.getElementById('btn_upload_Versement'+idVersement).style.display = "block";
            }
            function showPreviewBon(event,idPagnet) {
                    var file = document.getElementById('input_file_Bon'+idPagnet).value;
                    var reader = new FileReader();
                    reader.onload = function()
                    {
                        var format = file.substr(file.length - 3);
                        var pdf = document.getElementById('output_pdf_Bon'+idPagnet);
                        var image = document.getElementById('output_image_Bon'+idPagnet);
                        if(format=='pdf'){
                            document.getElementById('output_pdf_Bon'+idPagnet).style.display = "block";
                            document.getElementById('output_image_Bon'+idPagnet).style.display = "none";
                            pdf.src = reader.result;
                        }
                        else{
                            document.getElementById('output_image_Bon'+idPagnet).style.display = "block";
                            document.getElementById('output_pdf_Bon'+idPagnet).style.display = "none";
                            image.src = reader.result;
                        }
                    }
                    reader.readAsDataURL(event.target.files[0]);
                    document.getElementById('btn_upload_Bon'+idPagnet).style.display = "block";
                }

        </script>

    <!-- Fin Javascript de l'Accordion pour Tout les Paniers -->



    <!-- Debut de l'Accordion pour Tout les Paniers -->

        <div class="panel-group" id="accordion">

            <!-- Debut Boucle while concernant les Paniers en cours (1 aux maximum) -->  

                
            <!-- Fin Boucle while concernant les Paniers en cours (1 aux maximum) -->



            <!-- Debut Boucle while concernant les Paniers Vendus -->

                

            <!-- Fin Boucle while concernant les Paniers Vendus  -->



        </div>

    <!-- Fin de l'Accordion pour Tout les Paniers -->



    <script>$(document).ready(function(){$("#AjoutLigne").click(function(){$("#AjoutLigneModal").modal();});});</script></body></html>

    <script type="text/javascript">
        
        //paniers=JSON.parse(localStorage.getItem("pagnet"));
        paniers=getPanier();
        versements=getVersement();
        users=JSON.parse(localStorage.getItem("Boutique"));
        
        //lesComptes=getCompte();
        lesComptes=JSON.parse(localStorage.getItem("Compte"));
        versementClients=JSON.parse(localStorage.getItem("Versement"));
        date=new Date();
        //datejour=date.toLocaleDateString("es-CL");
        
        seachUser=users.find(u =>u.idutilisateur==sessionStorage.iduserSession) 
        chaine=seachUser.prenom 
        prenom = chaine.slice(0, 3);
        idClient=localStorage.getItem('idClient')
        peride=localStorage.getItem('Periode')

        periode1=peride.split(' au ')
        dateD=periode1[0]
        dateF=periode1[1]
        
        ///alert(dateD+' '+dateF)
         



        if(paniers!=null){ 
            //lesPaniers= paniers.filter(p =>p.datepagej>=dateD && p.datepagej<=dateF)
            lesPaniersBon= paniers.filter(p =>p.idClient==idClient && p.verrouiller==1 && p.iduser==sessionStorage.iduserSession)
            lesPaniersVers= paniers.filter(p =>p.idClient==idClient && p.verrouiller==2 && p.iduser==sessionStorage.iduserSession)
            //alert(lesPaniersVers)
            sommeB=0
            sommeV=0
            
            if(localStorage.position=='bc'){
                
                for(var k=0; k<lesPaniersVers.length;k++){
                    //alert("ok")
                    identifiantP=lesPaniersVers[k].identifiantP
                    var p= '<div class="panel panel-warning" id=panelPanier'+lesPaniersVers[k].idPagnet+'>'+

                        '<div class="panel-heading">'+

                            '<h4 data-toggle="collapse" data-parent="#accordion" href="#pagnet'+lesPaniersVers[k].idPagnet+'"  class="panel-title expand">'+

                                '<div class="right-arrow pull-right">+</div>'+

                                '<a class="row" href="#">'+ 

                                    '<span class="noImpr col-md-2 col-sm-2 col-xs-12" id="panierEncours'+lesPaniersVers[k].idPagnet+'"> Versement</span>'+

                                    '<span class="noImpr col-md-2 col-sm-3 col-xs-12">Date: '+lesPaniersVers[k].datepagej+'</span>'+        

                                    '<span class="noImpr col-md-2 col-sm-3 col-xs-12">Heure: '+lesPaniersVers[k].heurePagnet+'</span>'+

                                    '<span class="noImpr col-md-2 col-sm-3 col-xs-12" >Montant: <span id="somme_Total'+lesPaniersVers[k].idPagnet+'" ></span>'+lesPaniersVers[k].totalp+'</span>'+

                                    // '<span class="noImpr col-md-3 col-sm-3 col-xs-12" >Total A  payer: <span id="somme_Apayer'+lesPaniersVers[k].idPagnet+'" ></span></span>'+                 
                                    '<span class="noImpr col-md-2 col-sm-2 col-xs-12" > Facture : #'+identifiantP.substr(8)+'</span>'+ 

                                    '<span class="noImpr col-md-1 col-sm-3 col-xs-12"> '+prenom.toUpperCase()+'</span>'+ 
                                '</a>'+

                            '</h4>'+

                        '</div>'+
                        '<div id=pagnet'+lesPaniersVers[k].idPagnet+' class="panel-collapse collapse" > '+

                        '<div class="panel-body" >'+

                        //<!--*******************************Debut Retourner Pagnet****************************************-->'+

                        '<button type="submit" 	 class="btn btn-danger pull-right" data-toggle="modal" data-target=#msg_rtrn_pagnet'+lesPaniersVers[k].idPagnet+'>'+

                            '<span class="glyphicon glyphicon-remove"></span>Retourner'+

                        '</button >'+



                        '<div class="modal fade" id="msg_rtrn_pagnet'+lesPaniersVers[k].idPagnet+'" role="dialog">'+

                        '<div class="modal-dialog">'+


                            '<div class="modal-content">'+

                                '<div class="modal-header panel-primary">'+

                                    '<button type="button" class="close" data-dismiss="modal">&times;</button >'+

                                    '<h4 class="modal-title">Confirmation</h4>'+

                                '</div>'+

                                '<form  class="form-inline noImpr"  id="factForm" method="post"  >'+

                                    '<div class="modal-body">'+

                                        '<p>Voulez-vous retourner le panier numéro <b>'+(j+1)+'<b></p>'+

                                        '<input type="hidden" name="idPagnet" id="idPagnet"  value='+lesPaniersVers[k].idPagnet+'>'+

                                    '</div>'+

                                    '<div class="modal-footer">'+

                                        '<button type="button" class="btn btn-default" data-dismiss="modal">Close</button >'+

                                        '<button type="button" name="btnRetournerPagnet" data-idPanier='+lesPaniersVers[k].idPagnet+' class="btn btn-success btnRetournerPagnet">Confirmer<img src="images/loading-gif3.gif" class="img-load-retournerPanier" style="height: 30px;width: 30px; display:none;" alt="GIF" srcset=""></button >'+

                                    '</div>'+

                                '</form>'+

                            '</div>'+

                        '</div>'+

                        '</div>'+

                        //<!--*******************************Fin Retourner Pagnet****************************************-->'+



                        //<!--*******************************Debut Facture****************************************-->'+




                        '<button type="submit" class="btn btn-warning pull-right" style="margin-right:20px;" data-toggle="modal" data-target=#msg_fact_pagnet'+lesPaniersVers[k].idPagnet+'>'+

                            'Facture'+

                        '</button >'+






                        '<div class="modal fade" id="msg_fact_pagnet'+lesPaniersVers[k].idPagnet+'" role="dialog">'+

                        '<div class="modal-dialog">'+

                            //<!-- Modal content-->'+

                            '<div class="modal-content">'+

                                '<div class="modal-header panel-primary">'+

                                    '<button type="button" class="close" data-dismiss="modal">&times;</button >'+

                                    '<h4 class="modal-title">Informations Client</h4>'+

                                '</div>'+

                                '<form  class=" noImpr"  method="post"  id="idPanierFac'+lesPaniersVers[k].idPagnet+'"  value="'+lesPaniersVers[k].idPagnet+'" >'+

                                        '<div class="modal-body">'+

                                            '<div class="form-group">'+

                                                '<label for="inputEmail3" class="control-label">Nom Complet </label>'+

                                                '<input type="text" class="form-control" name="entreprise" id="nomclient'+lesPaniersVers[k].idPagnet+'" required="" placeholder="Le nom complet ici...">'+

                                            '</div>'+

                                            '<div class="row">'+

                                                '<div class="col-xs-6">'+

                                                    '<label for="reference">Adresse Client</label>'+

                                                    '<input type="text" class="form-control" name="adresse" id="adresseclient'+lesPaniersVers[k].idPagnet+'">'+

                                                '</div>'+

                                                '<div class="col-xs-6">'+

                                                    '<label for="reference">Telephone Client</label>'+

                                                    '<input type="text" class="form-control" name="telephone" id="telephone'+lesPaniersVers[k].idPagnet+'" >'+

                                                '</div>'+

                                            '</div>'+

                                            '<input type="hidden" name="idPagnet" id="idPanierF" value="'+lesPaniersVers[k].idPagnet+'">'+

                                        '</div>'+

                                        '<div class="modal-footer">'+

                                            '<button type="button" class="btn btn-default" data-dismiss="modal">Close</button >'+

                                            '<button type="submit" name="btnFacture" class="btn btn-success"'+
                                            'onclick="imprimerFacture('+lesPaniersVers[k].idPagnet+')">Confirmer</button >'+

                                        '</div>'+

                                    '</form>'+

                            '</div>'+

                        '</div>'+

                        '</div>'+

                        //<!--*******************************Fin Facture****************************************-->'+


                        '<button  class="btn btn-info  pull-right" style="margin-right:20px;" onclick="imprimerTicket('+lesPaniersVers[k].idPagnet+')">'+

                        'Ticket de Caisse'+

                        '</button >'+


                        '<form  class="form-inline pull-right noImpr" id="ticket'+lesPaniersVers[k].idPagnet+'"  target="_blank" style="margin-right:20px;"'+

                        'method="post" action="ticketCaisse.html" >'+

                        '<input type="hidden" name="idPagnet" id="idPagnet"  value='+lesPaniersVers[k].idPagnet+' >'+

                        '</form>'+


                            '<table  id=tablePanierV'+lesPaniersVers[k].idPagnet+' class="table table-bordered" style="margin-top:40px;">'+

                                '<thead>'+

                                    '<tr>'+

                                        '<th>Description</th>'+

                                        '<th>Montant</th>'+

                                        '<th>Date</th>'+

                                        '<th>Pièce jointe</th>'+

                                    '</tr>'+

                                '</thead>'+

                                '<tbody>'+
                                
                                    

                                    
                                '</tbody>'+

                            '</table>'+
                            '<div>'+

                            

                        '</div>'+

                        '</div>'+
                        '</div>';

                        $("#accordion").prepend(p);


                        var lignes=getLigne();

                        if(lignes!=null){
                            for(var j=0; j<lignes.length; j++){
                                if(lesPaniersVers[k].idPagnet==lignes[j].idPagnet){
                                    // designations=getDesignation()
                                    // searchDesignation=designations.find(d =>d.idDesignation==lignes[j].idDesignation); 
                                    
                                    // nbreArticleUniteStok=searchDesignation.nbreArticleUniteStock

                                    //alert(nbreArticleUniteStok)
                                    //if(lignes[j].unitevente!='Article' && lignes[j].unitevente!='article'){

                                        var l='<tr>' +

                                            '<td>'+'Versement<br /> type Paiement: ' + lignes[j].unitevente + '</td>' +

                                            '<td>' + lignes[j].prixunitevente + '</td>' +

                                            '<td>' + lignes[j].designation + '</td>' +

                                            '<td><img class="btn btn-xs" src="images/upload.png" align="middle" alt="apperçu" width="45" height="40" data-toggle="modal" data-target=#imageNvVersement218 onclick="imageUpVersement(218,)" 	 /></td>'+

                                            '</tr>';

                                            $("#tablePanierV"+lesPaniersVers[k].idPagnet).prepend(l);
                                            

                                    }
                                    
                                }
                        }

                        sommeV=sommeV+parseInt(lesPaniersVers[k].totalp)

                }

                for(var i=0; i<lesPaniersBon.length;i++){
                    
                    identifiantP=lesPaniersBon[i].identifiantP
                    var p= '<div class="panel panel-info" id=panelPanier'+lesPaniersBon[i].idPagnet+'>'+
           
                      '<div class="panel-heading">'+
           
                          '<h4 data-toggle="collapse" data-parent="#accordion" href="#pagnet'+lesPaniersBon[i].idPagnet+'"  class="panel-title expand">'+
           
                              '<div class="right-arrow pull-right">+</div>'+
           
                              '<a class="row" href="#">'+ 
           
                                  '<span class="noImpr col-md-1 col-sm-2 col-xs-12" id=paniertermine'+lesPaniersBon[i].idPagnet+'> Bon'+' '+(i+1)+'</span>'+
           
                                  '<span class="noImpr col-md-2 col-sm-2 col-xs-12">Date: '+lesPaniersBon[i].datepagej+'</span>'+
           
                                  '<span class="noImpr col-md-2 col-sm-2 col-xs-12" >Total panier: '+lesPaniersBon[i].totalp+'</span>'+
           
                                  '<span class="noImpr col-md-3 col-sm-3 col-xs-12" >Total A  payer: '+(lesPaniersBon[i].totalp-lesPaniersBon[i].remise)+'</span>'+ 
           
                                  '<span class="noImpr col-md-2 col-sm-3 col-xs-12" > Facture : #'+identifiantP.substr(8)+'</span>'+
           
                                  '<span class="noImpr col-md-1 col-sm-3 col-xs-12">'+prenom.toUpperCase()+'</span>'+                
           
                              '</a>'+
           
                          '</h4>'+
           
                      '</div>'+
           
                      '<div id=pagnet'+lesPaniersBon[i].idPagnet+' class="panel-collapse collapse" > '+
           
                          '<div class="panel-body" >'+
           
                      //<!--*******************************Debut Retourner Pagnet****************************************-->'+
           
                      '<button type="submit" 	 class="btn btn-danger pull-right" data-toggle="modal" data-target=#msg_rtrn_pagnet'+lesPaniersBon[i].idPagnet+'>'+
           
                              '<span class="glyphicon glyphicon-remove"></span>Retourner'+
           
                      '</button >'+
           
           
           
                      '<div class="modal fade" id="msg_rtrn_pagnet'+lesPaniersBon[i].idPagnet+'" role="dialog">'+
           
                          '<div class="modal-dialog">'+
           
           
                              '<div class="modal-content">'+
           
                                  '<div class="modal-header panel-primary">'+
           
                                      '<button type="button" class="close" data-dismiss="modal">&times;</button >'+
           
                                      '<h4 class="modal-title">Confirmation</h4>'+
           
                                  '</div>'+
           
                                  '<form  class="form-inline noImpr"  id="factForm" method="post"  >'+
           
                                      '<div class="modal-body">'+
           
                                          '<p>Voulez-vous retourner le panier numéro <b>'+(i+1)+'<b></p>'+
           
                                          '<input type="hidden" name="idPagnet" id="idPagnet"  value='+lesPaniersBon[i].idPagnet+'>'+
           
                                      '</div>'+
           
                                      '<div class="modal-footer">'+
           
                                          '<button type="button" class="btn btn-default" data-dismiss="modal">Close</button >'+
           
                                          '<button type="button" name="btnRetournerPagnet" data-idPanier='+lesPaniersBon[i].idPagnet+' class="btn btn-success btnRetournerPagnet">Confirmer<img src="images/loading-gif3.gif" class="img-load-retournerPanier" style="height: 30px;width: 30px; display:none;" alt="GIF" srcset=""></button >'+
           
                                      '</div>'+
           
                                  '</form>'+
           
                              '</div>'+
           
                          '</div>'+
           
                      '</div>'+
           
                      //<!--*******************************Fin Retourner Pagnet****************************************-->'+
           
           
           
                      //<!--*******************************Debut Editer Pagnet****************************************-->'+
           
           
                      '<button type="button" class="btn btn-primary pull-left modeEditionBtn" id="edit-'+lesPaniersBon[i].idPagnet+'">'+
           
                          '<span class="glyphicon glyphicon-edit"></span> Editer<img src="images/loading-gif3.gif" class="img-load-editer" style="height: 30px;width: 30px;display:none;" alt="GIF" srcset="">'+
           
                      '</button >'+
           
           
           
                      '<div class="modal fade" id="msg_edit_pagnet'+lesPaniersBon[i].idPagnet+'" role="dialog">'+
           
                          '<div class="modal-dialog">'+
           
                              '<div class="modal-content">'+
           
                                  '<div class="modal-header panel-primary">'+
           
                                      '<button type="button" class="close" data-dismiss="modal">&times;</button >'+
           
                                      '<h4 class="modal-title">Alert</h4>'+
           
                                  '</div>'+
           
                                  '<p>Une erreur est survenu lors de l\'édition. <br>'+
           
                                      'Veuillez ressayer!</p>'+
           
                              '</div>'+
           
                          '</div>'+
           
                      '</div>'+
           
           
                      //<!--*******************************Fin Editer Pagnet****************************************-->'+
           
           
           
                      //<!--*******************************Debut Facture****************************************-->'+
           
           
           
           
                          '<button type="submit" class="btn btn-warning pull-right" style="margin-right:20px;" data-toggle="modal" data-target=#msg_fact_pagnet'+lesPaniersBon[i].idPagnet+'>'+
           
                              'Facture'+
           
                          '</button >'+
           
           
           
           
           
           
                      '<div class="modal fade" id="msg_fact_pagnet'+lesPaniersBon[i].idPagnet+'" role="dialog">'+
           
                          '<div class="modal-dialog">'+
           
                              //<!-- Modal content-->'+
           
                              '<div class="modal-content">'+
           
                                  '<div class="modal-header panel-primary">'+
           
                                      '<button type="button" class="close" data-dismiss="modal">&times;</button >'+
           
                                      '<h4 class="modal-title">Informations Client</h4>'+
           
                                  '</div>'+
           
                                  '<form  class=" noImpr"  method="post"  id="idPanierFac'+lesPaniersBon[i].idPagnet+'"  value="'+lesPaniersBon[i].idPagnet+'" >'+
           
                                          '<div class="modal-body">'+
           
                                              '<div class="form-group">'+
           
                                                  '<label for="inputEmail3" class="control-label">Nom Complet </label>'+
           
                                                  '<input type="text" class="form-control" name="entreprise" id="nomclient'+lesPaniersBon[i].idPagnet+'" required="" placeholder="Le nom complet ici...">'+
           
                                              '</div>'+
           
                                              '<div class="row">'+
           
                                                  '<div class="col-xs-6">'+
           
                                                      '<label for="reference">Adresse Client</label>'+
           
                                                      '<input type="text" class="form-control" name="adresse" id="adresseclient'+lesPaniersBon[i].idPagnet+'">'+
           
                                                  '</div>'+
           
                                                  '<div class="col-xs-6">'+
           
                                                      '<label for="reference">Telephone Client</label>'+
           
                                                      '<input type="text" class="form-control" name="telephone" id="telephone'+lesPaniersBon[i].idPagnet+'" >'+
           
                                                  '</div>'+
           
                                              '</div>'+
           
                                              '<input type="hidden" name="idPagnet" id="idPanierF" value="'+lesPaniersBon[i].idPagnet+'">'+
           
                                          '</div>'+
           
                                          '<div class="modal-footer">'+
           
                                              '<button type="button" class="btn btn-default" data-dismiss="modal">Close</button >'+
           
                                              '<button type="submit" name="btnFacture" class="btn btn-success"'+
                                              'onclick="imprimerFacture('+lesPaniersBon[i].idPagnet+')">Confirmer</button >'+
           
                                          '</div>'+
           
                                      '</form>'+
           
                              '</div>'+
           
                          '</div>'+
           
                      '</div>'+
           
                      //<!--*******************************Fin Facture****************************************-->'+
           
           
           
           
                      '<button  class="btn btn-info  pull-right" style="margin-right:20px;" onclick="imprimerTicket('+lesPaniersBon[i].idPagnet+')">'+
           
                          'Ticket de Caisse'+
           
                      '</button >'+
           
           
           
           
           
           
                      '<form  class="form-inline pull-right noImpr" id="ticket'+lesPaniersBon[i].idPagnet+'"  target="_blank" style="margin-right:20px;"'+
           
                      'method="post" action="ticketCaisse.html" >'+
           
                      '<input type="hidden" name="idPagnet" id="idPagnet"  value='+lesPaniersBon[i].idPagnet+' >'+
           
                      '</form>'+
           
           
                              '<table  id=tablePanier'+lesPaniersBon[i].idPagnet+' class="tabPanier table"  width="100%" >'+
           
                                  '<thead>'+
           
                                      '<tr>'+
           
                                          '<th>Référence</th>'+
           
                                          '<th>Quantité</th>'+
           
                                          '<th>Unité Vente</th>'+
           
                                          '<th>Prix Unité Vente</th>'+
           
                                      '</tr>'+
           
                                  '</thead>'+
           
                                  '<tbody>'+
                                  
                                      
           
                                      
                                  '</tbody>'+
           
                              '</table>'+
                              '<div>'+
           
                              '<div>********************************************* <br/>TOTAL : '+lesPaniersBon[i].totalp+'</div>'+
           
                              '<div id="remise"></div>'+
           
                              '<div id="apayer"><b>Net A  payer : '+lesPaniersBon[i].apayerPagnet+'</b></div>'+
           
                              '<div id="compte"></div>'+
           
                              '<div id="espece"></div>'+
           
                              '<div id="rendu"></div>'+
           
                              '<div id="avance"></div>'+
           
                              '<div id="reste"></div>'+
           
                              '<div id="compte2"></div>'+
           
                              '</div>'+
           
                          '</div>'+
           
                          '</div>'+
                      '</div>';
                                  
                      $("#accordion").prepend(p); 
                      var lignes=getLigne();
                      if(lignes!=null){
                      for(var j=0; j<lignes.length; j++){
                          if(lesPaniersBon[i].idPagnet==lignes[j].idPagnet){
                              var l="<tr>" +
           
                                          "<td>" + lignes[j].designation + "</td>" +
           
                                          "<td>"+lignes[j].quantite+"</td>" +
           
                                          "<td>"+lignes[j].unitevente+"</td>" +
           
                                          "<td>"+lignes[j].prixunitevente +"</td>" +
                                      
                                          '<td>'+
           
                                              '<button  type="submit" 	 class="btn btn-danger pull-right" data-toggle="modal" data-target="#msg_rtrnApres_ligne'+lignes[j].numligne+'" disabled="true">'+
           
                                                      '<span class="glyphicon glyphicon-remove"></span>Retour'+
           
                                              '</button>'+
           
           
           
                                              '<div class="modal fade" id="msg_rtrnApres_ligne'+lignes[j].numligne+'" role="dialog">'+
           
                                                  '<div class="modal-dialog">'+
           
                                                      //<!-- Modal content-->'+
           
                                                      '<div class="modal-content">'+
           
                                                          '<div class="modal-header panel-primary">'+
           
                                                              '<button type="button" class="close" data-dismiss="modal">&times;</button>'+
           
                                                              '<h4 class="modal-title">Confirmation</h4>'+
           
                                                          '</div>'+
           
                                                          '<form class="form-inline noImpr" id="factForm" method="post" >'+
           
                                                              '<div class="modal-body">'+
           
                                                                  '<p>Voulez-vous retourner cette ligne du panier numéro <b>'+idPanier+'</b></p>'+
           
                                                                  // '<input type="hidden" name="idPagnet" id="idPagnet2618" value=1725 >'+
           
                                                                  // '<input type="hidden" name="designation" id="designation2618" value=Farine de niebe >'+
           
                                                                  // '<input type="hidden" name="numligne" id="numligne2618" value=2618 >'+
           
                                                                  // '<input type="hidden" name="idStock" id="idStock2618" value=0 >'+
           
                                                                  // '<input type="hidden" name="unitevente" id="unitevente2618" value=article >'+
           
                                                                  // '<input type="hidden" name="prixunitevente" id="prixunitevente2618" value=750 >'+
           
                                                                  // '<input type="hidden" name="prixtotal" id="prixtotal2618" value=750 >'+
           
                                                                  // '<input type="hidden" name="totalp" id="totalp2618" value=750 >'+
           
                                                                  '<div class="row">'+
           
                                                                      '<div class="col-xs-6">'+
           
                                                                          '<label for="reference">Ancienne quantite </label>'+
           
                                                                          '<input type="text" disabled="true" class="form-control" value=1 >'+
           
                                                                      '</div>'+
           
                                                                      '<div class="col-xs-6">'+
           
                                                                          '<label for="reference">Nouvelle quantite</label>'+
           
                                                                          '<input type="text" class="form-control inputRetourApres" name="quantite" data-numligne="'+lignes[j].numligne+'" id="quantite'+lignes[j].numligne+'" value=1 >'+
           
                                                                      '</div>'+
           
                                                                  '</div>'+
           
                                                              '</div>'+
           
                                                              '<div class="modal-footer">'+
           
                                                                  '<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>'+
           
                                                                  '<button type="button"  name="btnRetourApres" data-numligne="'+lignes[j].numligne+'" class="btn btn-success btnRetourApres">Confirmer'+
           
                                                                      '<img src="images/loading-gif3.gif" class="img-load-retourApres" style="height: 30px;width: 30px; display:none;" alt="GIF" srcset=""> </button>'+
           
                                                              '</div>'+
           
                                                          '</form>'+
           
                                                      '</div>'+
           
                                                  '</div>'+
           
                                              '</div>'+
                                          '</td>'+
           
           
                                      "</tr>";
           
                              $("#tablePanier"+lesPaniersBon[i].idPagnet).prepend(l);
           
                              var searchPanier=lesPaniersBon.find(p =>p.idPagnet==lesPaniersBon[i].idPagnet);
                              
                              
                              
                              var searchCompte=lesComptes.find(c =>c.idCompte==lesPaniersBon[i].idCompte); 
                              
           
                              document.getElementById('compte').innerHTML='Compte : '+searchCompte.nomCompte
           
                              if(searchPanier.remise==0){
                                  divRemise='<div></div>';
                                  document.getElementById('remise').innerHTML=divRemise
                                  //$('#remise').hide
                                  
                              
                              }
                              else{
                                  document.getElementById('remise').innerHTML='Remise : '+searchPanier.remise
                              }
                              if(searchPanier.versement==0){
                                  divEspece='<div></div>';
                                  divRendu='<div></div>';
                                  document.getElementById('espece').innerHTML=divEspece
                                  document.getElementById('rendu').innerHTML=divRendu
                                  // $('#espece').hide
                                  // $('#rendu').hide
                              }
                              else{
           
                                  document.getElementById('espece').innerHTML='Espèce : '+searchPanier.versement
                                  document.getElementById('rendu').innerHTML='Rendu : '+searchPanier.restourne
                              }
                              if(searchPanier.avance==0 || searchPanier.avance==""){
                                  divAvance='<div></div>';
                                  divReste='<div></div>';
                                  document.getElementById('avance').innerHTML=divAvance
                                  document.getElementById('reste').innerHTML=divReste
                                  // document.getElementById('avance').innerHTML='Avance : '+searchPanier.avance
                                  // document.getElementById('reste').innerHTML='Reste : '+parseInt(searchPanier.apayerPagnet-searchPanier.avance)
                                  // var idCompte2=localStorage.getItem('idCompte2')
                                  // var searchCompte=lesComptes.find(c =>c.idCompte==idCompte2);
                                  
                                  // document.getElementById('compte2').innerHTML='Compte avance : '+searchCompte.nomCompte
                              }
                              else{
                                  
                                  document.getElementById('avance').innerHTML='Avance : '+searchPanier.avance
                                  document.getElementById('reste').innerHTML='Reste : '+parseInt(searchPanier.apayerPagnet-searchPanier.avance)
                                  var idCompte2=localStorage.getItem('idCompte2')
                                  searchCompte=lesComptes.find(c =>c.idCompte==searchPanier.idCompteAvance);
                                            if(searchCompte){
                                                document.getElementById('compte2').innerHTML='Compte avance : '+searchCompte.nomCompte
                                            }else{
                                                nomCompte='Caisse'
                                                searchVersement=versements.find(v =>v.idPagnet==searchPanier.idPagnet);
                                                if(searchVersement){
                                                    searchCompte=lesComptes.find(c =>c.idCompte==searchVersement.idCompte);
                                                    document.getElementById('compte2').innerHTML='Compte avance : '+searchCompte.nomCompte 
                                                }else{
                                                    document.getElementById('compte2').innerHTML='Compte avance : '+nomCompte  
                                                }
                                            }
                                  
                                  
                              }
                          }
                      }
                 // }
           
              //}
              
              }
           
              //} 
              sommeB=sommeB+parseInt(lesPaniersBon[i].apayerPagnet)
              //alert(sommeB)
           }
              
            }
            if(localStorage.position=='vc'){

                for(var i=0; i<lesPaniersBon.length;i++){
                    
                    identifiantP=lesPaniersBon[i].identifiantP
                    var p= '<div class="panel panel-info" id=panelPanier'+lesPaniersBon[i].idPagnet+'>'+
           
                      '<div class="panel-heading">'+
           
                          '<h4 data-toggle="collapse" data-parent="#accordion" href="#pagnet'+lesPaniersBon[i].idPagnet+'"  class="panel-title expand">'+
           
                              '<div class="right-arrow pull-right">+</div>'+
           
                              '<a class="row" href="#">'+ 
           
                                  '<span class="noImpr col-md-1 col-sm-2 col-xs-12" id=paniertermine'+lesPaniersBon[i].idPagnet+'> Bon'+' '+(i+1)+'</span>'+
           
                                  '<span class="noImpr col-md-2 col-sm-2 col-xs-12">Date: '+lesPaniersBon[i].datepagej+'</span>'+
           
                                  '<span class="noImpr col-md-2 col-sm-2 col-xs-12" >Total panier: '+lesPaniersBon[i].totalp+'</span>'+
           
                                  '<span class="noImpr col-md-3 col-sm-3 col-xs-12" >Total A  payer: '+(lesPaniersBon[i].totalp-lesPaniersBon[i].remise)+'</span>'+ 
           
                                  '<span class="noImpr col-md-2 col-sm-3 col-xs-12" > Facture : #'+identifiantP.substr(8)+'</span>'+
           
                                  '<span class="noImpr col-md-1 col-sm-3 col-xs-12">'+prenom.toUpperCase()+'</span>'+                
           
                              '</a>'+
           
                          '</h4>'+
           
                      '</div>'+
           
                      '<div id=pagnet'+lesPaniersBon[i].idPagnet+' class="panel-collapse collapse" > '+
           
                          '<div class="panel-body" >'+
           
                      //<!--*******************************Debut Retourner Pagnet****************************************-->'+
           
                      '<button type="submit" 	 class="btn btn-danger pull-right" data-toggle="modal" data-target=#msg_rtrn_pagnet'+lesPaniersBon[i].idPagnet+'>'+
           
                              '<span class="glyphicon glyphicon-remove"></span>Retourner'+
           
                      '</button >'+
           
           
           
                      '<div class="modal fade" id="msg_rtrn_pagnet'+lesPaniersBon[i].idPagnet+'" role="dialog">'+
           
                          '<div class="modal-dialog">'+
           
           
                              '<div class="modal-content">'+
           
                                  '<div class="modal-header panel-primary">'+
           
                                      '<button type="button" class="close" data-dismiss="modal">&times;</button >'+
           
                                      '<h4 class="modal-title">Confirmation</h4>'+
           
                                  '</div>'+
           
                                  '<form  class="form-inline noImpr"  id="factForm" method="post"  >'+
           
                                      '<div class="modal-body">'+
           
                                          '<p>Voulez-vous retourner le panier numéro <b>'+(i+1)+'<b></p>'+
           
                                          '<input type="hidden" name="idPagnet" id="idPagnet"  value='+lesPaniersBon[i].idPagnet+'>'+
           
                                      '</div>'+
           
                                      '<div class="modal-footer">'+
           
                                          '<button type="button" class="btn btn-default" data-dismiss="modal">Close</button >'+
           
                                          '<button type="button" name="btnRetournerPagnet" data-idPanier='+lesPaniersBon[i].idPagnet+' class="btn btn-success btnRetournerPagnet">Confirmer<img src="images/loading-gif3.gif" class="img-load-retournerPanier" style="height: 30px;width: 30px; display:none;" alt="GIF" srcset=""></button >'+
           
                                      '</div>'+
           
                                  '</form>'+
           
                              '</div>'+
           
                          '</div>'+
           
                      '</div>'+
           
                      //<!--*******************************Fin Retourner Pagnet****************************************-->'+
           
           
           
                      //<!--*******************************Debut Editer Pagnet****************************************-->'+
           
           
                      '<button type="button" class="btn btn-primary pull-left modeEditionBtn" id="edit-'+lesPaniersBon[i].idPagnet+'">'+
           
                          '<span class="glyphicon glyphicon-edit"></span> Editer<img src="images/loading-gif3.gif" class="img-load-editer" style="height: 30px;width: 30px;display:none;" alt="GIF" srcset="">'+
           
                      '</button >'+
           
           
           
                      '<div class="modal fade" id="msg_edit_pagnet'+lesPaniersBon[i].idPagnet+'" role="dialog">'+
           
                          '<div class="modal-dialog">'+
           
                              '<div class="modal-content">'+
           
                                  '<div class="modal-header panel-primary">'+
           
                                      '<button type="button" class="close" data-dismiss="modal">&times;</button >'+
           
                                      '<h4 class="modal-title">Alert</h4>'+
           
                                  '</div>'+
           
                                  '<p>Une erreur est survenu lors de l\'édition. <br>'+
           
                                      'Veuillez ressayer!</p>'+
           
                              '</div>'+
           
                          '</div>'+
           
                      '</div>'+
           
           
                      //<!--*******************************Fin Editer Pagnet****************************************-->'+
           
           
           
                      //<!--*******************************Debut Facture****************************************-->'+
           
           
           
           
                          '<button type="submit" class="btn btn-warning pull-right" style="margin-right:20px;" data-toggle="modal" data-target=#msg_fact_pagnet'+lesPaniersBon[i].idPagnet+'>'+
           
                              'Facture'+
           
                          '</button >'+
           
           
           
           
           
           
                      '<div class="modal fade" id="msg_fact_pagnet'+lesPaniersBon[i].idPagnet+'" role="dialog">'+
           
                          '<div class="modal-dialog">'+
           
                              //<!-- Modal content-->'+
           
                              '<div class="modal-content">'+
           
                                  '<div class="modal-header panel-primary">'+
           
                                      '<button type="button" class="close" data-dismiss="modal">&times;</button >'+
           
                                      '<h4 class="modal-title">Informations Client</h4>'+
           
                                  '</div>'+
           
                                  '<form  class=" noImpr"  method="post"  id="idPanierFac'+lesPaniersBon[i].idPagnet+'"  value="'+lesPaniersBon[i].idPagnet+'" >'+
           
                                          '<div class="modal-body">'+
           
                                              '<div class="form-group">'+
           
                                                  '<label for="inputEmail3" class="control-label">Nom Complet </label>'+
           
                                                  '<input type="text" class="form-control" name="entreprise" id="nomclient'+lesPaniersBon[i].idPagnet+'" required="" placeholder="Le nom complet ici...">'+
           
                                              '</div>'+
           
                                              '<div class="row">'+
           
                                                  '<div class="col-xs-6">'+
           
                                                      '<label for="reference">Adresse Client</label>'+
           
                                                      '<input type="text" class="form-control" name="adresse" id="adresseclient'+lesPaniersBon[i].idPagnet+'">'+
           
                                                  '</div>'+
           
                                                  '<div class="col-xs-6">'+
           
                                                      '<label for="reference">Telephone Client</label>'+
           
                                                      '<input type="text" class="form-control" name="telephone" id="telephone'+lesPaniersBon[i].idPagnet+'" >'+
           
                                                  '</div>'+
           
                                              '</div>'+
           
                                              '<input type="hidden" name="idPagnet" id="idPanierF" value="'+lesPaniersBon[i].idPagnet+'">'+
           
                                          '</div>'+
           
                                          '<div class="modal-footer">'+
           
                                              '<button type="button" class="btn btn-default" data-dismiss="modal">Close</button >'+
           
                                              '<button type="submit" name="btnFacture" class="btn btn-success"'+
                                              'onclick="imprimerFacture('+lesPaniersBon[i].idPagnet+')">Confirmer</button >'+
           
                                          '</div>'+
           
                                      '</form>'+
           
                              '</div>'+
           
                          '</div>'+
           
                      '</div>'+
           
                      //<!--*******************************Fin Facture****************************************-->'+
           
           
           
           
                      '<button  class="btn btn-info  pull-right" style="margin-right:20px;" onclick="imprimerTicket('+lesPaniersBon[i].idPagnet+')">'+
           
                          'Ticket de Caisse'+
           
                      '</button >'+
           
           
           
           
           
           
                      '<form  class="form-inline pull-right noImpr" id="ticket'+lesPaniersBon[i].idPagnet+'"  target="_blank" style="margin-right:20px;"'+
           
                      'method="post" action="ticketCaisse.html" >'+
           
                      '<input type="hidden" name="idPagnet" id="idPagnet"  value='+lesPaniersBon[i].idPagnet+' >'+
           
                      '</form>'+
           
           
                              '<table  id=tablePanier'+lesPaniersBon[i].idPagnet+' class="tabPanier table"  width="100%" >'+
           
                                  '<thead>'+
           
                                      '<tr>'+
           
                                          '<th>Référence</th>'+
           
                                          '<th>Quantité</th>'+
           
                                          '<th>Unité Vente</th>'+
           
                                          '<th>Prix Unité Vente</th>'+
           
                                      '</tr>'+
           
                                  '</thead>'+
           
                                  '<tbody>'+
                                  
                                      
           
                                      
                                  '</tbody>'+
           
                              '</table>'+
                              '<div>'+
           
                              '<div>********************************************* <br/>TOTAL : '+lesPaniersBon[i].totalp+'</div>'+
           
                              '<div id="remise"></div>'+
           
                              '<div id="apayer"><b>Net A  payer : '+lesPaniersBon[i].apayerPagnet+'</b></div>'+
           
                              '<div id="compte"></div>'+
           
                              '<div id="espece"></div>'+
           
                              '<div id="rendu"></div>'+
           
                              '<div id="avance"></div>'+
           
                              '<div id="reste"></div>'+
           
                              '<div id="compte2"></div>'+
           
                              '</div>'+
           
                          '</div>'+
           
                          '</div>'+
                      '</div>';
                                  
                      $("#accordion").prepend(p); 
                      var lignes=getLigne();
                      if(lignes!=null){
                      for(var j=0; j<lignes.length; j++){
                          if(lesPaniersBon[i].idPagnet==lignes[j].idPagnet){
                              var l="<tr>" +
           
                                          "<td>" + lignes[j].designation + "</td>" +
           
                                          "<td>"+lignes[j].quantite+"</td>" +
           
                                          "<td>"+lignes[j].unitevente+"</td>" +
           
                                          "<td>"+lignes[j].prixunitevente +"</td>" +
                                      
                                          '<td>'+
           
                                              '<button  type="submit" 	 class="btn btn-danger pull-right" data-toggle="modal" data-target="#msg_rtrnApres_ligne'+lignes[j].numligne+'" disabled="true">'+
           
                                                      '<span class="glyphicon glyphicon-remove"></span>Retour'+
           
                                              '</button>'+
           
           
           
                                              '<div class="modal fade" id="msg_rtrnApres_ligne'+lignes[j].numligne+'" role="dialog">'+
           
                                                  '<div class="modal-dialog">'+
           
                                                      //<!-- Modal content-->'+
           
                                                      '<div class="modal-content">'+
           
                                                          '<div class="modal-header panel-primary">'+
           
                                                              '<button type="button" class="close" data-dismiss="modal">&times;</button>'+
           
                                                              '<h4 class="modal-title">Confirmation</h4>'+
           
                                                          '</div>'+
           
                                                          '<form class="form-inline noImpr" id="factForm" method="post" >'+
           
                                                              '<div class="modal-body">'+
           
                                                                  '<p>Voulez-vous retourner cette ligne du panier numéro <b>'+idPanier+'</b></p>'+
           
                                                                  // '<input type="hidden" name="idPagnet" id="idPagnet2618" value=1725 >'+
           
                                                                  // '<input type="hidden" name="designation" id="designation2618" value=Farine de niebe >'+
           
                                                                  // '<input type="hidden" name="numligne" id="numligne2618" value=2618 >'+
           
                                                                  // '<input type="hidden" name="idStock" id="idStock2618" value=0 >'+
           
                                                                  // '<input type="hidden" name="unitevente" id="unitevente2618" value=article >'+
           
                                                                  // '<input type="hidden" name="prixunitevente" id="prixunitevente2618" value=750 >'+
           
                                                                  // '<input type="hidden" name="prixtotal" id="prixtotal2618" value=750 >'+
           
                                                                  // '<input type="hidden" name="totalp" id="totalp2618" value=750 >'+
           
                                                                  '<div class="row">'+
           
                                                                      '<div class="col-xs-6">'+
           
                                                                          '<label for="reference">Ancienne quantite </label>'+
           
                                                                          '<input type="text" disabled="true" class="form-control" value=1 >'+
           
                                                                      '</div>'+
           
                                                                      '<div class="col-xs-6">'+
           
                                                                          '<label for="reference">Nouvelle quantite</label>'+
           
                                                                          '<input type="text" class="form-control inputRetourApres" name="quantite" data-numligne="'+lignes[j].numligne+'" id="quantite'+lignes[j].numligne+'" value=1 >'+
           
                                                                      '</div>'+
           
                                                                  '</div>'+
           
                                                              '</div>'+
           
                                                              '<div class="modal-footer">'+
           
                                                                  '<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>'+
           
                                                                  '<button type="button"  name="btnRetourApres" data-numligne="'+lignes[j].numligne+'" class="btn btn-success btnRetourApres">Confirmer'+
           
                                                                      '<img src="images/loading-gif3.gif" class="img-load-retourApres" style="height: 30px;width: 30px; display:none;" alt="GIF" srcset=""> </button>'+
           
                                                              '</div>'+
           
                                                          '</form>'+
           
                                                      '</div>'+
           
                                                  '</div>'+
           
                                              '</div>'+
                                          '</td>'+
           
           
                                      "</tr>";
           
                              $("#tablePanier"+lesPaniersBon[i].idPagnet).prepend(l);
           
                              var searchPanier=lesPaniersBon.find(p =>p.idPagnet==lesPaniersBon[i].idPagnet);
                              
                              
                              
                              var searchCompte=lesComptes.find(c =>c.idCompte==lesPaniersBon[i].idCompte); 
                              
           
                              document.getElementById('compte').innerHTML='Compte : '+searchCompte.nomCompte
           
                              if(searchPanier.remise==0){
                                  divRemise='<div></div>';
                                  document.getElementById('remise').innerHTML=divRemise
                                  //$('#remise').hide
                                  
                              
                              }
                              else{
                                  document.getElementById('remise').innerHTML='Remise : '+searchPanier.remise
                              }
                              if(searchPanier.versement==0){
                                  divEspece='<div></div>';
                                  divRendu='<div></div>';
                                  document.getElementById('espece').innerHTML=divEspece
                                  document.getElementById('rendu').innerHTML=divRendu
                                  // $('#espece').hide
                                  // $('#rendu').hide
                              }
                              else{
           
                                  document.getElementById('espece').innerHTML='Espèce : '+searchPanier.versement
                                  document.getElementById('rendu').innerHTML='Rendu : '+searchPanier.restourne
                              }
                              if(searchPanier.avance==0 || searchPanier.avance==""){
                                  divAvance='<div></div>';
                                  divReste='<div></div>';
                                  document.getElementById('avance').innerHTML=divAvance
                                  document.getElementById('reste').innerHTML=divReste
                                  // document.getElementById('avance').innerHTML='Avance : '+searchPanier.avance
                                  // document.getElementById('reste').innerHTML='Reste : '+parseInt(searchPanier.apayerPagnet-searchPanier.avance)
                                  // var idCompte2=localStorage.getItem('idCompte2')
                                  // var searchCompte=lesComptes.find(c =>c.idCompte==idCompte2);
                                  
                                  // document.getElementById('compte2').innerHTML='Compte avance : '+searchCompte.nomCompte
                              }
                              else{
                                  
                                  document.getElementById('avance').innerHTML='Avance : '+searchPanier.avance
                                  document.getElementById('reste').innerHTML='Reste : '+parseInt(searchPanier.apayerPagnet-searchPanier.avance)
                                  var idCompte2=localStorage.getItem('idCompte2')
                                  searchCompte=lesComptes.find(c =>c.idCompte==searchPanier.idCompteAvance);
                                            if(searchCompte){
                                                document.getElementById('compte2').innerHTML='Compte avance : '+searchCompte.nomCompte
                                            }else{
                                                nomCompte='Caisse'
                                                searchVersement=versements.find(v =>v.idPagnet==searchPanier.idPagnet);
                                                if(searchVersement){
                                                    searchCompte=lesComptes.find(c =>c.idCompte==searchVersement.idCompte);
                                                    document.getElementById('compte2').innerHTML='Compte avance : '+searchCompte.nomCompte 
                                                }else{
                                                    document.getElementById('compte2').innerHTML='Compte avance : '+nomCompte 
                                                }
                                            }
                                  
                                  
                              }
                          }
                      }
                 // }
           
              //}
              
              }
           
              //} 
              sommeB=sommeB+parseInt(lesPaniersBon[i].apayerPagnet)
              //alert(sommeB)
           }
           
                for(var k=0; k<lesPaniersVers.length;k++){
                    //alert("ok")
                    identifiantP=lesPaniersVers[k].identifiantP
                    var p= '<div class="panel panel-warning" id=panelPanier'+lesPaniersVers[k].idPagnet+'>'+

                        '<div class="panel-heading">'+

                            '<h4 data-toggle="collapse" data-parent="#accordion" href="#pagnet'+lesPaniersVers[k].idPagnet+'"  class="panel-title expand">'+

                                '<div class="right-arrow pull-right">+</div>'+

                                '<a class="row" href="#">'+ 

                                    '<span class="noImpr col-md-2 col-sm-2 col-xs-12" id="panierEncours'+lesPaniersVers[k].idPagnet+'"> Versement</span>'+

                                    '<span class="noImpr col-md-2 col-sm-3 col-xs-12">Date: '+lesPaniersVers[k].datepagej+'</span>'+        

                                    '<span class="noImpr col-md-2 col-sm-3 col-xs-12">Heure: '+lesPaniersVers[k].heurePagnet+'</span>'+

                                    '<span class="noImpr col-md-2 col-sm-3 col-xs-12" >Montant: <span id="somme_Total'+lesPaniersVers[k].idPagnet+'" ></span>'+lesPaniersVers[k].totalp+'</span>'+

                                    // '<span class="noImpr col-md-3 col-sm-3 col-xs-12" >Total A  payer: <span id="somme_Apayer'+lesPaniersVers[k].idPagnet+'" ></span></span>'+                 
                                    '<span class="noImpr col-md-2 col-sm-2 col-xs-12" > Facture : #'+identifiantP.substr(8)+'</span>'+

                                    '<span class="noImpr col-md-1 col-sm-3 col-xs-12"> '+prenom.toUpperCase()+'</span>'+ 
                                '</a>'+

                            '</h4>'+

                        '</div>'+
                        '<div id=pagnet'+lesPaniersVers[k].idPagnet+' class="panel-collapse collapse" > '+

                        '<div class="panel-body" >'+

                        //<!--*******************************Debut Retourner Pagnet****************************************-->'+

                        '<button type="submit" 	 class="btn btn-danger pull-right" data-toggle="modal" data-target=#msg_rtrn_pagnet'+lesPaniersVers[k].idPagnet+'>'+

                            '<span class="glyphicon glyphicon-remove"></span>Retourner'+

                        '</button >'+



                        '<div class="modal fade" id="msg_rtrn_pagnet'+lesPaniersVers[k].idPagnet+'" role="dialog">'+

                        '<div class="modal-dialog">'+


                            '<div class="modal-content">'+

                                '<div class="modal-header panel-primary">'+

                                    '<button type="button" class="close" data-dismiss="modal">&times;</button >'+

                                    '<h4 class="modal-title">Confirmation</h4>'+

                                '</div>'+

                                '<form  class="form-inline noImpr"  id="factForm" method="post"  >'+

                                    '<div class="modal-body">'+

                                        '<p>Voulez-vous retourner le panier numéro <b>'+(j+1)+'<b></p>'+

                                        '<input type="hidden" name="idPagnet" id="idPagnet"  value='+lesPaniersVers[k].idPagnet+'>'+

                                    '</div>'+

                                    '<div class="modal-footer">'+

                                        '<button type="button" class="btn btn-default" data-dismiss="modal">Close</button >'+

                                        '<button type="button" name="btnRetournerPagnet" data-idPanier='+lesPaniersVers[k].idPagnet+' class="btn btn-success btnRetournerPagnet">Confirmer<img src="images/loading-gif3.gif" class="img-load-retournerPanier" style="height: 30px;width: 30px; display:none;" alt="GIF" srcset=""></button >'+

                                    '</div>'+

                                '</form>'+

                            '</div>'+

                        '</div>'+

                        '</div>'+

                        //<!--*******************************Fin Retourner Pagnet****************************************-->'+



                        //<!--*******************************Debut Facture****************************************-->'+




                        '<button type="submit" class="btn btn-warning pull-right" style="margin-right:20px;" data-toggle="modal" data-target=#msg_fact_pagnet'+lesPaniersVers[k].idPagnet+'>'+

                            'Facture'+

                        '</button >'+






                        '<div class="modal fade" id="msg_fact_pagnet'+lesPaniersVers[k].idPagnet+'" role="dialog">'+

                        '<div class="modal-dialog">'+

                            //<!-- Modal content-->'+

                            '<div class="modal-content">'+

                                '<div class="modal-header panel-primary">'+

                                    '<button type="button" class="close" data-dismiss="modal">&times;</button >'+

                                    '<h4 class="modal-title">Informations Client</h4>'+

                                '</div>'+

                                '<form  class=" noImpr"  method="post"  id="idPanierFac'+lesPaniersVers[k].idPagnet+'"  value="'+lesPaniersVers[k].idPagnet+'" >'+

                                        '<div class="modal-body">'+

                                            '<div class="form-group">'+

                                                '<label for="inputEmail3" class="control-label">Nom Complet </label>'+

                                                '<input type="text" class="form-control" name="entreprise" id="nomclient'+lesPaniersVers[k].idPagnet+'" required="" placeholder="Le nom complet ici...">'+

                                            '</div>'+

                                            '<div class="row">'+

                                                '<div class="col-xs-6">'+

                                                    '<label for="reference">Adresse Client</label>'+

                                                    '<input type="text" class="form-control" name="adresse" id="adresseclient'+lesPaniersVers[k].idPagnet+'">'+

                                                '</div>'+

                                                '<div class="col-xs-6">'+

                                                    '<label for="reference">Telephone Client</label>'+

                                                    '<input type="text" class="form-control" name="telephone" id="telephone'+lesPaniersVers[k].idPagnet+'" >'+

                                                '</div>'+

                                            '</div>'+

                                            '<input type="hidden" name="idPagnet" id="idPanierF" value="'+lesPaniersVers[k].idPagnet+'">'+

                                        '</div>'+

                                        '<div class="modal-footer">'+

                                            '<button type="button" class="btn btn-default" data-dismiss="modal">Close</button >'+

                                            '<button type="submit" name="btnFacture" class="btn btn-success"'+
                                            'onclick="imprimerFacture('+lesPaniersVers[k].idPagnet+')">Confirmer</button >'+

                                        '</div>'+

                                    '</form>'+

                            '</div>'+

                        '</div>'+

                        '</div>'+

                        //<!--*******************************Fin Facture****************************************-->'+


                        '<button  class="btn btn-info  pull-right" style="margin-right:20px;" onclick="imprimerTicket('+lesPaniersVers[k].idPagnet+')">'+

                        'Ticket de Caisse'+

                        '</button >'+


                        '<form  class="form-inline pull-right noImpr" id="ticket'+lesPaniersVers[k].idPagnet+'"  target="_blank" style="margin-right:20px;"'+

                        'method="post" action="ticketCaisse.html" >'+

                        '<input type="hidden" name="idPagnet" id="idPagnet"  value='+lesPaniersVers[k].idPagnet+' >'+

                        '</form>'+


                            '<table  id=tablePanierV'+lesPaniersVers[k].idPagnet+' class="table table-bordered" style="margin-top:40px;">'+

                                '<thead>'+

                                    '<tr>'+

                                        '<th>Description</th>'+

                                        '<th>Montant</th>'+

                                        '<th>Date</th>'+

                                        '<th>Pièce jointe</th>'+

                                    '</tr>'+

                                '</thead>'+

                                '<tbody>'+
                                
                                    

                                    
                                '</tbody>'+

                            '</table>'+
                            '<div>'+

                            

                        '</div>'+

                        '</div>'+
                        '</div>';

                        $("#accordion").prepend(p);


                        var lignes=getLigne();

                        if(lignes!=null){
                            for(var j=0; j<lignes.length; j++){
                                if(lesPaniersVers[k].idPagnet==lignes[j].idPagnet){
                                    // designations=getDesignation()
                                    // searchDesignation=designations.find(d =>d.idDesignation==lignes[j].idDesignation); 
                                    
                                    // nbreArticleUniteStok=searchDesignation.nbreArticleUniteStock

                                    //alert(nbreArticleUniteStok)
                                    //if(lignes[j].unitevente!='Article' && lignes[j].unitevente!='article'){

                                        var l='<tr>' +

                                            '<td>'+'Versement<br /> type Paiement: ' + lignes[j].unitevente + '</td>' +

                                            '<td>' + lignes[j].prixunitevente + '</td>' +

                                            '<td>' + lignes[j].designation + '</td>' +

                                            '<td><img class="btn btn-xs" src="images/upload.png" align="middle" alt="apperçu" width="45" height="40" data-toggle="modal" data-target=#imageNvVersement218 onclick="imageUpVersement(218,)" 	 /></td>'+

                                            '</tr>';

                                            $("#tablePanierV"+lesPaniersVers[k].idPagnet).prepend(l);
                                            

                                    }
                                    
                                }
                        }

                        sommeV=sommeV+parseInt(lesPaniersVers[k].totalp)

                }
            
                
            }
            
            solde=localStorage.getItem("SoldeClient")
            
            document.getElementById('montant').innerHTML='Montant à verser : '+(solde+sommeB-sommeV)+',00 F CFA'
            document.getElementById('montantBon').innerHTML='Total des Bons : '+sommeB+',00 F CFA' 
            document.getElementById('montantVers').innerHTML='Total des Versements : '+sommeV+',00 F CFA'
                //localStorage.setItem('Montant',somme)
                   
            $("#pagnet"+getIdPanier()).attr('class', "panel-collapse collapse in")
            
        }

       
    </script>